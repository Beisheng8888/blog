<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.64" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://github.com/Beisheng8888/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html"><meta property="og:site_name" content="Mr.Jh"><meta property="og:title" content="Spring03"><meta property="og:description" content="Spring03 一、AOP 1 AOP简介 问题导入 问题1：AOP的作用是什么？ 问题2：连接点和切入点有什么区别，二者谁的范围大？ 问题3：请描述什么是切面？ 1.1 AOP简介和作用【理解】 AOP(Aspect Oriented Programming)面向切面编程，一种编程范式，指导开发者如何组织程序结构 OOP(Object Oriented Programming)面向对象编程 作用：在不惊动原始设计的基础上为其进行功能增强。简单的说就是在不改变方法源代码的基础上对方法进行功能增强。 Spring理念：无入侵式/无侵入式"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-07-18T07:48:56.000Z"><meta property="article:author" content="Mr.Jh"><meta property="article:modified_time" content="2023-07-18T07:48:56.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Spring03","image":[""],"dateModified":"2023-07-18T07:48:56.000Z","author":[{"@type":"Person","name":"Mr.Jh","url":"https://github.com/Beisheng8888"}]}</script><title>Spring03 | Mr.Jh</title><meta name="description" content="Spring03 一、AOP 1 AOP简介 问题导入 问题1：AOP的作用是什么？ 问题2：连接点和切入点有什么区别，二者谁的范围大？ 问题3：请描述什么是切面？ 1.1 AOP简介和作用【理解】 AOP(Aspect Oriented Programming)面向切面编程，一种编程范式，指导开发者如何组织程序结构 OOP(Object Oriented Programming)面向对象编程 作用：在不惊动原始设计的基础上为其进行功能增强。简单的说就是在不改变方法源代码的基础上对方法进行功能增强。 Spring理念：无入侵式/无侵入式">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/blog/assets/style-3455fefa.css" as="style"><link rel="stylesheet" href="/blog/assets/style-3455fefa.css">
    <link rel="modulepreload" href="/blog/assets/app-1973086d.js"><link rel="modulepreload" href="/blog/assets/Spring03.html-b1a447bf.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/blog/assets/Spring03.html-c8732602.js"><link rel="prefetch" href="/blog/assets/index.html-81bbb418.js" as="script"><link rel="prefetch" href="/blog/assets/intro.html-3c5f49c2.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-08c93f94.js" as="script"><link rel="prefetch" href="/blog/assets/IO流01.html-328ed5bb.js" as="script"><link rel="prefetch" href="/blog/assets/IO流02.html-d4df1126.js" as="script"><link rel="prefetch" href="/blog/assets/XML枚举注解.html-1619971e.js" as="script"><link rel="prefetch" href="/blog/assets/内部类和Lambda表达式.html-c5f40784.js" as="script"><link rel="prefetch" href="/blog/assets/单元测试日志.html-61155113.js" as="script"><link rel="prefetch" href="/blog/assets/可变参数.html-bc194a72.js" as="script"><link rel="prefetch" href="/blog/assets/多线程01.html-b21fbf79.js" as="script"><link rel="prefetch" href="/blog/assets/多线程02.html-0c1cfb5a.js" as="script"><link rel="prefetch" href="/blog/assets/常用API01.html-10e667f8.js" as="script"><link rel="prefetch" href="/blog/assets/常用API02.html-1dacbcd9.js" as="script"><link rel="prefetch" href="/blog/assets/泛型和TreeSet和二叉树.html-f9dbb332.js" as="script"><link rel="prefetch" href="/blog/assets/类加载器和反射.html-70fcc83c.js" as="script"><link rel="prefetch" href="/blog/assets/红黑树.html-0cec82e6.js" as="script"><link rel="prefetch" href="/blog/assets/继承.html-003ab787.js" as="script"><link rel="prefetch" href="/blog/assets/网络编程.html-53f11e2a.js" as="script"><link rel="prefetch" href="/blog/assets/集合.html-f25c1162.js" as="script"><link rel="prefetch" href="/blog/assets/Filter和Listener和Ajax.html-36197ea7.js" as="script"><link rel="prefetch" href="/blog/assets/HTML和CSS.html-37eb476a.js" as="script"><link rel="prefetch" href="/blog/assets/HTTP和Tomcat和Servlet.html-78927875.js" as="script"><link rel="prefetch" href="/blog/assets/JDBC.html-65b01460.js" as="script"><link rel="prefetch" href="/blog/assets/JSP.html-914efbd6.js" as="script"><link rel="prefetch" href="/blog/assets/JavaScript.html-ecda31c5.js" as="script"><link rel="prefetch" href="/blog/assets/Maven和MyBatis.html-b0c42f60.js" as="script"><link rel="prefetch" href="/blog/assets/Request和Response.html-99cebe34.js" as="script"><link rel="prefetch" href="/blog/assets/VUE和Element.html-b199b2c0.js" as="script"><link rel="prefetch" href="/blog/assets/mysql基础.html-b1e675f6.js" as="script"><link rel="prefetch" href="/blog/assets/mysql高级.html-1e36eb37.js" as="script"><link rel="prefetch" href="/blog/assets/会话技术.html-18bda836.js" as="script"><link rel="prefetch" href="/blog/assets/Docker.html-00681164.js" as="script"><link rel="prefetch" href="/blog/assets/Docker应用.html-9565fcc0.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ.html-d5a68188.js" as="script"><link rel="prefetch" href="/blog/assets/SpringCloud01.html-0d87ad68.js" as="script"><link rel="prefetch" href="/blog/assets/SpringCloud02.html-ebdb512e.js" as="script"><link rel="prefetch" href="/blog/assets/Maven高级.html-3ff33480.js" as="script"><link rel="prefetch" href="/blog/assets/MyBatisPlus.html-da5bc503.js" as="script"><link rel="prefetch" href="/blog/assets/Spring01.html-6d73d7b9.js" as="script"><link rel="prefetch" href="/blog/assets/Spring02.html-a1a6d4aa.js" as="script"><link rel="prefetch" href="/blog/assets/SpringBoot.html-5ddd23dc.js" as="script"><link rel="prefetch" href="/blog/assets/SpringMVC01.html-7e8a2eb1.js" as="script"><link rel="prefetch" href="/blog/assets/SpringMVC02.html-e16f76bf.js" as="script"><link rel="prefetch" href="/blog/assets/Git.html-2f07245e.js" as="script"><link rel="prefetch" href="/blog/assets/Jmeter快速入门.html-81fb28bc.js" as="script"><link rel="prefetch" href="/blog/assets/Kafka.html-87ef726b.js" as="script"><link rel="prefetch" href="/blog/assets/Linux-01.html-858fceff.js" as="script"><link rel="prefetch" href="/blog/assets/Linux-02.html-ba970d78.js" as="script"><link rel="prefetch" href="/blog/assets/MongoDB.html-2b8dc905.js" as="script"><link rel="prefetch" href="/blog/assets/Mysql读写分离.html-8576af6f.js" as="script"><link rel="prefetch" href="/blog/assets/Mysql高性能优化方案.html-42ec047e.js" as="script"><link rel="prefetch" href="/blog/assets/Nacos.html-bc593533.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ部署指南.html-b69188ab.js" as="script"><link rel="prefetch" href="/blog/assets/Redis.html-a6a7342e.js" as="script"><link rel="prefetch" href="/blog/assets/Redis集群.html-f15d53a4.js" as="script"><link rel="prefetch" href="/blog/assets/freemarker和Minio.html-b5fc31f1.js" as="script"><link rel="prefetch" href="/blog/assets/seata的部署和集成.html-c46a78f9.js" as="script"><link rel="prefetch" href="/blog/assets/sentinel规则持久化.html-16ed6eeb.js" as="script"><link rel="prefetch" href="/blog/assets/xxl-Job.html-bd8e0ec1.js" as="script"><link rel="prefetch" href="/blog/assets/其他.html-ff5bcf3e.js" as="script"><link rel="prefetch" href="/blog/assets/分布式搜索引擎01.html-a9cf39a8.js" as="script"><link rel="prefetch" href="/blog/assets/分布式搜索引擎02.html-17906928.js" as="script"><link rel="prefetch" href="/blog/assets/分布式搜索引擎03.html-cd3596e2.js" as="script"><link rel="prefetch" href="/blog/assets/集成minio.html-cb6d2917.js" as="script"><link rel="prefetch" href="/blog/assets/基础篇.html-e227ce5f.js" as="script"><link rel="prefetch" href="/blog/assets/并发篇.html-bdfc5019.js" as="script"><link rel="prefetch" href="/blog/assets/框架篇.html-07b1b425.js" as="script"><link rel="prefetch" href="/blog/assets/虚拟机篇.html-5c6f357c.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ-高级篇.html-df574b84.js" as="script"><link rel="prefetch" href="/blog/assets/Sentinel.html-806d57b5.js" as="script"><link rel="prefetch" href="/blog/assets/分布式事务.html-982fd574.js" as="script"><link rel="prefetch" href="/blog/assets/分布式缓存.html-b87e03d6.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-a31b29e4.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-aed00d6f.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-04d72ad7.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e0c44343.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-3b22870e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-6ba12430.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-de88ce22.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9ce6a9bf.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0ec0e8bb.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-acd00202.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-59962e9d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e5d547ce.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-48e60ab0.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-2b6d2d20.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-c0325f34.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-c408f31e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-5d2b156e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-75babee1.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-510486a9.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9e5f0548.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-67a11a35.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-7ba73d1c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b62d5bf2.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-4f7de1ae.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-6b6fec72.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-2ead2fc1.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-179bb1b5.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-5d008d90.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-4bafb498.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9e0b3b99.js" as="script"><link rel="prefetch" href="/blog/assets/intro.html-1e065ee1.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-11abfd91.js" as="script"><link rel="prefetch" href="/blog/assets/IO流01.html-6cd1309e.js" as="script"><link rel="prefetch" href="/blog/assets/IO流02.html-1c22c533.js" as="script"><link rel="prefetch" href="/blog/assets/XML枚举注解.html-919f85d2.js" as="script"><link rel="prefetch" href="/blog/assets/内部类和Lambda表达式.html-1c8c1d4a.js" as="script"><link rel="prefetch" href="/blog/assets/单元测试日志.html-c15d0413.js" as="script"><link rel="prefetch" href="/blog/assets/可变参数.html-59a4e326.js" as="script"><link rel="prefetch" href="/blog/assets/多线程01.html-6d7a8af9.js" as="script"><link rel="prefetch" href="/blog/assets/多线程02.html-a963d1cb.js" as="script"><link rel="prefetch" href="/blog/assets/常用API01.html-b6bbaa56.js" as="script"><link rel="prefetch" href="/blog/assets/常用API02.html-243084f6.js" as="script"><link rel="prefetch" href="/blog/assets/泛型和TreeSet和二叉树.html-6416e2bc.js" as="script"><link rel="prefetch" href="/blog/assets/类加载器和反射.html-edf63fc6.js" as="script"><link rel="prefetch" href="/blog/assets/红黑树.html-2b6a0dd2.js" as="script"><link rel="prefetch" href="/blog/assets/继承.html-7073e76d.js" as="script"><link rel="prefetch" href="/blog/assets/网络编程.html-6f4d92a4.js" as="script"><link rel="prefetch" href="/blog/assets/集合.html-1535042b.js" as="script"><link rel="prefetch" href="/blog/assets/Filter和Listener和Ajax.html-75e2a96f.js" as="script"><link rel="prefetch" href="/blog/assets/HTML和CSS.html-ec1d8a76.js" as="script"><link rel="prefetch" href="/blog/assets/HTTP和Tomcat和Servlet.html-9489ec20.js" as="script"><link rel="prefetch" href="/blog/assets/JDBC.html-e9a5aab3.js" as="script"><link rel="prefetch" href="/blog/assets/JSP.html-73086860.js" as="script"><link rel="prefetch" href="/blog/assets/JavaScript.html-3330cd61.js" as="script"><link rel="prefetch" href="/blog/assets/Maven和MyBatis.html-70839934.js" as="script"><link rel="prefetch" href="/blog/assets/Request和Response.html-5b6e53f6.js" as="script"><link rel="prefetch" href="/blog/assets/VUE和Element.html-049c987d.js" as="script"><link rel="prefetch" href="/blog/assets/mysql基础.html-03922803.js" as="script"><link rel="prefetch" href="/blog/assets/mysql高级.html-00088b0a.js" as="script"><link rel="prefetch" href="/blog/assets/会话技术.html-55f78c71.js" as="script"><link rel="prefetch" href="/blog/assets/Docker.html-1690c9ab.js" as="script"><link rel="prefetch" href="/blog/assets/Docker应用.html-9e9256cd.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ.html-fd62fd7e.js" as="script"><link rel="prefetch" href="/blog/assets/SpringCloud01.html-6c9bf87f.js" as="script"><link rel="prefetch" href="/blog/assets/SpringCloud02.html-3fdd2350.js" as="script"><link rel="prefetch" href="/blog/assets/Maven高级.html-9c4fcbb8.js" as="script"><link rel="prefetch" href="/blog/assets/MyBatisPlus.html-17d5ae4f.js" as="script"><link rel="prefetch" href="/blog/assets/Spring01.html-c1c775b9.js" as="script"><link rel="prefetch" href="/blog/assets/Spring02.html-6f323941.js" as="script"><link rel="prefetch" href="/blog/assets/SpringBoot.html-cf4d4ffe.js" as="script"><link rel="prefetch" href="/blog/assets/SpringMVC01.html-817bef77.js" as="script"><link rel="prefetch" href="/blog/assets/SpringMVC02.html-f524c840.js" as="script"><link rel="prefetch" href="/blog/assets/Git.html-5ddef253.js" as="script"><link rel="prefetch" href="/blog/assets/Jmeter快速入门.html-00f70fad.js" as="script"><link rel="prefetch" href="/blog/assets/Kafka.html-636df907.js" as="script"><link rel="prefetch" href="/blog/assets/Linux-01.html-48abbb53.js" as="script"><link rel="prefetch" href="/blog/assets/Linux-02.html-f58588d6.js" as="script"><link rel="prefetch" href="/blog/assets/MongoDB.html-1ede2ed8.js" as="script"><link rel="prefetch" href="/blog/assets/Mysql读写分离.html-266b232a.js" as="script"><link rel="prefetch" href="/blog/assets/Mysql高性能优化方案.html-6ba35264.js" as="script"><link rel="prefetch" href="/blog/assets/Nacos.html-f4fd5331.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ部署指南.html-1264cf90.js" as="script"><link rel="prefetch" href="/blog/assets/Redis.html-b6f3277f.js" as="script"><link rel="prefetch" href="/blog/assets/Redis集群.html-440c748a.js" as="script"><link rel="prefetch" href="/blog/assets/freemarker和Minio.html-4716306e.js" as="script"><link rel="prefetch" href="/blog/assets/seata的部署和集成.html-25fe42e5.js" as="script"><link rel="prefetch" href="/blog/assets/sentinel规则持久化.html-ab2e948c.js" as="script"><link rel="prefetch" href="/blog/assets/xxl-Job.html-ee9b5dac.js" as="script"><link rel="prefetch" href="/blog/assets/其他.html-29fffdcf.js" as="script"><link rel="prefetch" href="/blog/assets/分布式搜索引擎01.html-69903ce4.js" as="script"><link rel="prefetch" href="/blog/assets/分布式搜索引擎02.html-718fe8ae.js" as="script"><link rel="prefetch" href="/blog/assets/分布式搜索引擎03.html-6c36d534.js" as="script"><link rel="prefetch" href="/blog/assets/集成minio.html-99d2d5ac.js" as="script"><link rel="prefetch" href="/blog/assets/基础篇.html-9539519f.js" as="script"><link rel="prefetch" href="/blog/assets/并发篇.html-c15e3063.js" as="script"><link rel="prefetch" href="/blog/assets/框架篇.html-d7d773de.js" as="script"><link rel="prefetch" href="/blog/assets/虚拟机篇.html-b5075c31.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ-高级篇.html-c3b91a27.js" as="script"><link rel="prefetch" href="/blog/assets/Sentinel.html-f529b50e.js" as="script"><link rel="prefetch" href="/blog/assets/分布式事务.html-83724a5b.js" as="script"><link rel="prefetch" href="/blog/assets/分布式缓存.html-019460e1.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-33a832e0.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-150b3b71.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f298e1e7.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b53de554.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f96c823c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-506a0e08.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-95a594d2.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-69f489b3.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b639a9e8.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-65072a0a.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-d1446457.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0cb5078a.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-508f507e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-766ff7fe.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-7d0ea04c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-4a884fe9.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-7e72ded6.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-29750289.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-7e40a4a5.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-77b59291.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-1f4c3d9e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-5b9593da.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-1ce53f93.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-25fe2db8.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-eb06f248.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-1e926f45.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-8d7789f8.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-86af69b8.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-c2dde94e.js" as="script"><link rel="prefetch" href="/blog/assets/dash.all.min-01c02b4d.js" as="script"><link rel="prefetch" href="/blog/assets/mpegts-d8e77270.js" as="script"><link rel="prefetch" href="/blog/assets/hls.min-cab563d8.js" as="script"><link rel="prefetch" href="/blog/assets/artplayer-0687ddfd.js" as="script"><link rel="prefetch" href="/blog/assets/plyr.min-fe499837.js" as="script"><link rel="prefetch" href="/blog/assets/browser-21db0a97.js" as="script"><link rel="prefetch" href="/blog/assets/plyr.min-fe499837.js" as="script"><link rel="prefetch" href="/blog/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/blog/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/blog/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/blog/assets/mermaid.core-5b81ea25.js" as="script"><link rel="prefetch" href="/blog/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/blog/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/blog/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/blog/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/blog/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/blog/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/blog/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/blog/assets/VuePlayground-002b7ed7.js" as="script"><link rel="prefetch" href="/blog/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/blog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/blog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/blog/assets/index-5161ad19.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/blog/"><img class="vp-nav-logo" src="/blog/logo.png" alt="Mr.Jh"><!----><span class="vp-site-name hide-in-pad">Mr.Jh</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link active" href="/blog/src/"><!---->🍑目录<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍈JavaSE"><span class="title"><!---->🍈JavaSE</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaSE</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/IO%E6%B5%8101.html"><span class="font-icon icon iconfont icon-IO" style=""></span>IO流01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/IO%E6%B5%8102.html"><span class="font-icon icon iconfont icon-IO" style=""></span>IO流02<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/XML%E6%9E%9A%E4%B8%BE%E6%B3%A8%E8%A7%A3.html"><span class="font-icon icon iconfont icon-at" style=""></span>XML&amp;枚举&amp;注解<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%97%A5%E5%BF%97.html"><!---->单元测试&amp;日志<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0.html"><!---->可变参数<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E5%A4%9A%E7%BA%BF%E7%A8%8B01.html"><!---->多线程01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E5%A4%9A%E7%BA%BF%E7%A8%8B02.html"><!---->多线程02<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E5%B8%B8%E7%94%A8API01.html"><!---->常用API01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E5%B8%B8%E7%94%A8API02.html"><!---->常用API02<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E6%B3%9B%E5%9E%8B%E5%92%8CTreeSet%E5%92%8C%E4%BA%8C%E5%8F%89%E6%A0%91.html"><!---->泛型和TreeSet和二叉树<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%92%8C%E5%8F%8D%E5%B0%84.html"><!---->类加载器和反射<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E7%BA%A2%E9%BB%91%E6%A0%91.html"><!---->红黑树<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E7%BB%A7%E6%89%BF.html"><!---->继承<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B.html"><!---->网络编程<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaSE/%E9%9B%86%E5%90%88.html"><!---->集合<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍉JavaWeb"><span class="title"><!---->🍉JavaWeb</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaWeb</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/Filter%E5%92%8CListener%E5%92%8CAjax.html"><!---->Filter和Listener和Ajax<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/HTML%E5%92%8CCSS.html"><!---->HTML和CSS<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/HTTP%E5%92%8CTomcat%E5%92%8CServlet.html"><!---->HTTP和Tomcat和Servlet<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/JavaScript.html"><!---->JavaScript<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/JDBC.html"><!---->JDBC<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/JSP.html"><!---->JSP<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/Maven%E5%92%8CMyBatis.html"><!---->Maven和MyBatis<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/mysql%E5%9F%BA%E7%A1%80.html"><!---->mysql基础<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/mysql%E9%AB%98%E7%BA%A7.html"><!---->mysql高级<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/Request%E5%92%8CResponse.html"><!---->Request和Response<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/VUE%E5%92%8CElement.html"><!---->VUE和Element<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/JavaWeb/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.html"><!---->会话技术<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍊基础框架"><span class="title"><!---->🍊基础框架</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Maven%E9%AB%98%E7%BA%A7.html"><!---->Maven高级<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/MyBatisPlus.html"><!---->MyBatisPlus<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring01.html"><!---->Spring01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring02.html"><!---->Spring02<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link active" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html"><!---->Spring03<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringBoot.html"><!---->SpringBoot<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringMVC01.html"><!---->SpringMVC01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringMVC02.html"><!---->SpringMVC02<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍋基础微服务"><span class="title"><!---->🍋基础微服务</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础微服务</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/Docker.html"><!---->Docker<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/Docker%E5%BA%94%E7%94%A8.html"><!---->Docker应用<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ.html"><!---->RabbitMQ<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/SpringCloud01.html"><!---->SpringCloud01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/SpringCloud02.html"><!---->SpringCloud02<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍌高级微服务"><span class="title"><!---->🍌高级微服务</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>高级微服务</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ-%E9%AB%98%E7%BA%A7%E7%AF%87.html"><!---->RabbitMQ-高级篇<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/Sentinel.html"><!---->Sentinel<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html"><!---->分布式事务<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html"><!---->分布式缓存<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍍扩展"><span class="title"><!---->🍍扩展</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>必会工具</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/freemarker%E5%92%8CMinio.html"><!---->freemarker和Minio<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Git.html"><!---->Git<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Jmeter%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html"><!---->Jmeter快速入门<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Kafka.html"><!---->Kafka<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Linux-01.html"><!---->Linux-01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Linux-02.html"><!---->Linux-02<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/MongoDB.html"><!---->MongoDB<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Mysql%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html"><!---->Mysql读写分离<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Mysql%E9%AB%98%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88.html"><!---->Mysql高性能优化方案<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Nacos.html"><!---->Nacos<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Redis.html"><!---->Redis<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Redis%E9%9B%86%E7%BE%A4.html"><!---->Redis集群<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/seata%E7%9A%84%E9%83%A8%E7%BD%B2%E5%92%8C%E9%9B%86%E6%88%90.html"><!---->seata的部署和集成<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/sentinel%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96.html"><!---->sentinel规则持久化<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/xxl-Job.html"><!---->xxl-Job<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96.html"><!---->其他<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E01.html"><!---->分布式搜索引擎01<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E02.html"><!---->分布式搜索引擎02<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E03.html"><!---->分布式搜索引擎03<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E9%9B%86%E6%88%90minio.html"><!---->集成minio<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="🍇面试专题"><span class="title"><!---->🍇面试专题</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>面试专题</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E5%9F%BA%E7%A1%80%E7%AF%87.html"><!---->基础篇<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E7%AF%87.html"><!---->并发篇<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E6%A1%86%E6%9E%B6%E7%AF%87.html"><!---->框架篇<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AF%87.html"><!---->虚拟机篇<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://beisheng8888.github.io/#/" rel="noopener noreferrer" target="_blank" aria-label="🍒V1 文档" class="nav-link"><!---->🍒V1 文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/Beisheng8888/blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link vp-sidebar-title" href="/blog/src/JavaSE/"><!---->🍈JavaSE<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/IO%E6%B5%8101.html"><span class="font-icon icon iconfont icon-IO" style=""></span>IO流01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/IO%E6%B5%8102.html"><span class="font-icon icon iconfont icon-IO" style=""></span>IO流02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/XML%E6%9E%9A%E4%B8%BE%E6%B3%A8%E8%A7%A3.html"><!---->XML&amp;枚举&amp;注解<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%86%85%E9%83%A8%E7%B1%BB%E5%92%8CLambda%E8%A1%A8%E8%BE%BE%E5%BC%8F.html"><!---->内部类和Lambda表达式<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%97%A5%E5%BF%97.html"><!---->单元测试&amp;日志<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0.html"><!---->可变参数<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%A4%9A%E7%BA%BF%E7%A8%8B01.html"><!---->多线程01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%A4%9A%E7%BA%BF%E7%A8%8B02.html"><!---->多线程02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%B8%B8%E7%94%A8API01.html"><!---->常用API01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E5%B8%B8%E7%94%A8API02.html"><!---->常用API02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E6%B3%9B%E5%9E%8B%E5%92%8CTreeSet%E5%92%8C%E4%BA%8C%E5%8F%89%E6%A0%91.html"><!---->泛型和TreeSet和二叉树<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%92%8C%E5%8F%8D%E5%B0%84.html"><!---->类加载器和反射<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E7%BA%A2%E9%BB%91%E6%A0%91.html"><!---->红黑树<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E7%BB%A7%E6%89%BF.html"><!---->继承<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B.html"><!---->网络编程<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaSE/%E9%9B%86%E5%90%88.html"><!---->集合<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link vp-sidebar-title" href="/blog/src/JavaWeb/"><!---->🍉JavaWeb<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/Filter%E5%92%8CListener%E5%92%8CAjax.html"><!---->Filter&amp;Listener&amp;Ajax<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/HTML%E5%92%8CCSS.html"><!---->HTML&amp;CSS<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/HTTP%E5%92%8CTomcat%E5%92%8CServlet.html"><!---->HTTP&amp;Tomcat&amp;Servlet<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/JavaScript.html"><!---->JavaScript<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/JDBC.html"><!---->JDBC<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/JSP.html"><!---->JSP<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/Maven%E5%92%8CMyBatis.html"><!---->Maven&amp;MyBatis<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/mysql%E5%9F%BA%E7%A1%80.html"><!---->MySQL基础<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/mysql%E9%AB%98%E7%BA%A7.html"><!---->MySQL高级<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/Request%E5%92%8CResponse.html"><!---->Request&amp;Response<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/VUE%E5%92%8CElement.html"><!---->VUE&amp;Element<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/JavaWeb/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.html"><!---->会话技术<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link active vp-sidebar-title" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/"><!---->🍊基础框架<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Maven%E9%AB%98%E7%BA%A7.html"><!---->Maven高级<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/MyBatisPlus.html"><!---->MyBatisPlus<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring01.html"><!---->Spring01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring02.html"><!---->Spring02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html"><!---->Spring03<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#一、aop"><!---->一、AOP<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_1-aop简介"><!---->1 AOP简介<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_2-aop入门案例【重点】"><!---->2 AOP入门案例【重点】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_3-aop工作流程【理解】"><!---->3 AOP工作流程【理解】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_4-aop切入点表达式"><!---->4 AOP切入点表达式<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_5-aop通知类型【重点】"><!---->5 AOP通知类型【重点】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#二、aop案例"><!---->二、AOP案例<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_1-案例-测量业务层接口万次执行效率"><!---->1 案例-测量业务层接口万次执行效率<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_2-aop切入点数据获取"><!---->2 AOP切入点数据获取<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_3-案例-百度网盘密码数据兼容处理"><!---->3 案例-百度网盘密码数据兼容处理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_4-aop开发总结"><!---->4 AOP开发总结<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#三、spring事务管理"><!---->三、Spring事务管理<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_1-spring事务简介【重点】"><!---->1 Spring事务简介【重点】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_2-spring事务角色【理解】"><!---->2 Spring事务角色【理解】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring03.html#_3-spring事务相关配置"><!---->3 Spring事务相关配置<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringBoot.html"><!---->SpringBoot<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringMVC01.html"><!---->SpringMVC01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringMVC02.html"><!---->SpringMVC02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link vp-sidebar-title" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><!---->🍋基础微服务<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/Docker.html"><!---->Docker实用篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/Docker%E5%BA%94%E7%94%A8.html"><!---->Docker应用篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ.html"><!---->RabbitMQ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/SpringCloud01.html"><!---->SpringCloud01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%9F%BA%E7%A1%80%E5%BE%AE%E6%9C%8D%E5%8A%A1/SpringCloud02.html"><!---->SpringCloud实用篇02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link vp-sidebar-title" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><!---->🍌高级微服务<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ-%E9%AB%98%E7%BA%A7%E7%AF%87.html"><!---->RabbitMQ-高级篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html"><!---->分布式事务<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html"><!---->分布式缓存<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%AB%98%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1/Sentinel.html"><!---->微服务保护<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link vp-sidebar-title" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/"><!---->🍍扩展<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/freemarker%E5%92%8CMinio.html"><!---->freemarker&amp;MiniO<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Git.html"><!---->Git 分布式版本控制工具<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Jmeter%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html"><!---->Jmeter快速入门<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Kafka.html"><!---->Kafka<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Linux-01.html"><!---->Linux-01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Linux-02.html"><!---->Linux-02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/MongoDB.html"><!---->MongoDB<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Mysql%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html"><!---->Mysql读写分离<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Mysql%E9%AB%98%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88.html"><!---->Mysql高性能优化方案<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Nacos.html"><!---->Nacos安装指南<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/RabbitMQ%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97.html"><!---->RabbitMQ部署指南<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Redis.html"><!---->Redis基础<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/Redis%E9%9B%86%E7%BE%A4.html"><!---->Redis集群<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/seata%E7%9A%84%E9%83%A8%E7%BD%B2%E5%92%8C%E9%9B%86%E6%88%90.html"><!---->seata的部署和集成<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/sentinel%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96.html"><!---->Sentinel 规则持久化<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/xxl-Job.html"><!---->xxl-Job分布式任务调度<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96.html"><!---->其他<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E01.html"><!---->分布式搜索引擎01<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E02.html"><!---->分布式搜索引擎02<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E03.html"><!---->分布式搜索引擎03<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E5%BF%85%E4%BC%9A%E5%B7%A5%E5%85%B7/%E9%9B%86%E6%88%90minio.html"><!---->集成minio实现分布式文件存储<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-laptop-code" style=""></span><a class="vp-link nav-link vp-sidebar-title" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/"><!---->🍇面试专题<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E5%9F%BA%E7%A1%80%E7%AF%87.html"><!---->基础篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E7%AF%87.html"><!---->并发篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E6%A1%86%E6%9E%B6%E7%AF%87.html"><!---->框架篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/blog/src/%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AF%87.html"><!---->虚拟机篇<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Spring03</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Beisheng8888" target="_blank" rel="noopener noreferrer">Mr.Jh</a></span><span property="author" content="Mr.Jh"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-17T03:38:53.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 20 分钟</span><meta property="timeRequired" content="PT20M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category4 clickable" role="navigation">基础框架</span><!--]--><meta property="articleSection" content="基础框架"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/blog/#一、aop">一、AOP</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_1-aop简介">1 AOP简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_2-aop入门案例【重点】">2 AOP入门案例【重点】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_3-aop工作流程【理解】">3 AOP工作流程【理解】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_4-aop切入点表达式">4 AOP切入点表达式</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_5-aop通知类型【重点】">5 AOP通知类型【重点】</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/blog/#二、aop案例">二、AOP案例</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_1-案例-测量业务层接口万次执行效率">1 案例-测量业务层接口万次执行效率</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_2-aop切入点数据获取">2 AOP切入点数据获取</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_3-案例-百度网盘密码数据兼容处理">3 案例-百度网盘密码数据兼容处理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_4-aop开发总结">4 AOP开发总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/blog/#三、spring事务管理">三、Spring事务管理</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_1-spring事务简介【重点】">1 Spring事务简介【重点】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_2-spring事务角色【理解】">2 Spring事务角色【理解】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/blog/#_3-spring事务相关配置">3 Spring事务相关配置</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="spring03" tabindex="-1"><a class="header-anchor" href="#spring03" aria-hidden="true">#</a> Spring03</h1><h2 id="一、aop" tabindex="-1"><a class="header-anchor" href="#一、aop" aria-hidden="true">#</a> 一、AOP</h2><h3 id="_1-aop简介" tabindex="-1"><a class="header-anchor" href="#_1-aop简介" aria-hidden="true">#</a> 1 AOP简介</h3><h4 id="问题导入" tabindex="-1"><a class="header-anchor" href="#问题导入" aria-hidden="true">#</a> 问题导入</h4><p>问题1：AOP的作用是什么？</p><p>问题2：连接点和切入点有什么区别，二者谁的范围大？</p><p>问题3：请描述什么是切面？</p><h4 id="_1-1-aop简介和作用【理解】" tabindex="-1"><a class="header-anchor" href="#_1-1-aop简介和作用【理解】" aria-hidden="true">#</a> 1.1 AOP简介和作用【理解】</h4><ul><li>AOP(Aspect Oriented Programming)面向切面编程，一种编程范式，指导开发者如何组织程序结构 <ul><li>OOP(Object Oriented Programming)面向对象编程</li></ul></li><li>作用：在不惊动原始设计的基础上为其进行功能增强。简单的说就是在不改变方法源代码的基础上对方法进行功能增强。</li><li>Spring理念：无入侵式/无侵入式</li></ul><h4 id="_1-2-aop中的核心概念【理解】" tabindex="-1"><a class="header-anchor" href="#_1-2-aop中的核心概念【理解】" aria-hidden="true">#</a> 1.2 AOP中的核心概念【理解】</h4><figure><img src="/blog/assets/image-20210730144903209-34de9793.png" alt="image-20210730144903209" tabindex="0" loading="lazy"><figcaption>image-20210730144903209</figcaption></figure><ul><li>连接点（JoinPoint）：正在执行的方法，例如：update()、delete()、select()等都是连接点。</li><li>切入点（Pointcut）：进行功能增强了的方法，例如:update()、delete()方法，select()方法没有被增强所以不是切入点，但是是连接点。 <ul><li>在SpringAOP中，一个切入点可以只描述一个具体方法，也可以匹配多个方法 <ul><li>一个具体方法：com.beisheng.dao包下的BookDao接口中的无形参无返回值的save方法</li><li>匹配多个方法：所有的save方法，所有的get开头的方法，所有以Dao结尾的接口中的任意方法，所有带有一个参数的方法</li></ul></li></ul></li><li>通知（Advice）：在切入点前后执行的操作，也就是增强的共性功能 <ul><li>在SpringAOP中，功能最终以方法的形式呈现</li></ul></li><li>通知类：通知方法所在的类叫做通知类</li><li>切面（Aspect）：描述通知与切入点的对应关系，也就是哪些通知方法对应哪些切入点方法。</li></ul><h3 id="_2-aop入门案例【重点】" tabindex="-1"><a class="header-anchor" href="#_2-aop入门案例【重点】" aria-hidden="true">#</a> 2 AOP入门案例【重点】</h3><h4 id="问题导入-1" tabindex="-1"><a class="header-anchor" href="#问题导入-1" aria-hidden="true">#</a> 问题导入</h4><p>问题1：在通知方法中如何定义切入点表达式？</p><p>问题2：如何配置切面？</p><p>问题3：在配置类上如何开启AOP注解功能？</p><h4 id="_2-1-aop入门案例思路分析" tabindex="-1"><a class="header-anchor" href="#_2-1-aop入门案例思路分析" aria-hidden="true">#</a> 2.1 AOP入门案例思路分析</h4><ul><li>案例设定：测定接口执行效率</li><li>简化设定：在接口执行前输出当前系统时间</li><li>开发模式：XML or <strong><mark>注解</mark></strong></li><li>思路分析： <ol><li>导入坐标（pom.xml）</li><li>制作连接点方法（原始操作，dao接口与实现类）</li><li>制作共性功能（通知类与通知）</li><li>定义切入点</li><li>绑定切入点与通知关系（切面）</li></ol></li></ul><h4 id="_2-2-aop入门案例实现" tabindex="-1"><a class="header-anchor" href="#_2-2-aop入门案例实现" aria-hidden="true">#</a> 2.2 AOP入门案例实现</h4><h5 id="【第一步】导入aop相关坐标" tabindex="-1"><a class="header-anchor" href="#【第一步】导入aop相关坐标" aria-hidden="true">#</a> 【第一步】导入aop相关坐标</h5><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--spring核心依赖，会将spring-aop传递进来--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.10.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--切入点表达式依赖，目的是找到切入点方法，也就是找到要增强的方法--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjweaver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.9.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/blog/assets/image-20210730150138448-84fc6690.png" alt="image-20210730150138448" tabindex="0" loading="lazy"><figcaption>image-20210730150138448</figcaption></figure><h5 id="【第二步】定义dao接口与实现类" tabindex="-1"><a class="header-anchor" href="#【第二步】定义dao接口与实现类" aria-hidden="true">#</a> 【第二步】定义dao接口与实现类</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;book dao save ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;book dao update ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第三步】定义通知类-制作通知方法" tabindex="-1"><a class="header-anchor" href="#【第三步】定义通知类-制作通知方法" aria-hidden="true">#</a> 【第三步】定义通知类，制作通知方法</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//通知类必须配置成Spring管理的bean</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAdvice</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第四步】定义切入点表达式、配置切面-绑定切入点与通知关系" tabindex="-1"><a class="header-anchor" href="#【第四步】定义切入点表达式、配置切面-绑定切入点与通知关系" aria-hidden="true">#</a> 【第四步】定义切入点表达式、配置切面(绑定切入点与通知关系)</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//通知类必须配置成Spring管理的bean</span>
<span class="token annotation punctuation">@Component</span>
<span class="token comment">//设置当前类为切面类类</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAdvice</span> <span class="token punctuation">{</span>
    <span class="token comment">//设置切入点，@Pointcut注解要求配置在方法上方</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(void com.beisheng.dao.BookDao.update())&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">pt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//设置在切入点pt()的前面运行当前操作(前置通知)</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/blog/assets/image-20210730154740528-8f329199.png" alt="image-20210730154740528" tabindex="0" loading="lazy"><figcaption>image-20210730154740528</figcaption></figure><h5 id="【第五步】在配置类中进行spring注解包扫描和开启aop功能" tabindex="-1"><a class="header-anchor" href="#【第五步】在配置类中进行spring注解包扫描和开启aop功能" aria-hidden="true">#</a> 【第五步】在配置类中进行Spring注解包扫描和开启AOP功能</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.beisheng&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//开启注解开发AOP功能</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="测试类和运行结果" tabindex="-1"><a class="header-anchor" href="#测试类和运行结果" aria-hidden="true">#</a> 测试类和运行结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BookDao</span> bookDao <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/blog/assets/image-20210730151347354-1f84d6f3.png" alt="image-20210730151347354" tabindex="0" loading="lazy"><figcaption>image-20210730151347354</figcaption></figure><h3 id="_3-aop工作流程【理解】" tabindex="-1"><a class="header-anchor" href="#_3-aop工作流程【理解】" aria-hidden="true">#</a> 3 AOP工作流程【理解】</h3><h4 id="问题导入-2" tabindex="-1"><a class="header-anchor" href="#问题导入-2" aria-hidden="true">#</a> 问题导入</h4><p>什么是目标对象？什么是代理对象？</p><h4 id="_3-1-aop工作流程" tabindex="-1"><a class="header-anchor" href="#_3-1-aop工作流程" aria-hidden="true">#</a> 3.1 AOP工作流程</h4><ol><li>Spring容器启动</li><li>读取所有切面配置中的切入点</li><li>初始化bean，判定bean对应的类中的方法是否匹配到任意切入点 <ul><li>匹配失败，创建原始对象</li><li>匹配成功，创建原始对象（目标对象）的代理对象</li></ul></li><li>获取bean执行方法 <ul><li>获取的bean是原始对象时，调用方法并执行，完成操作</li><li>获取的bean是代理对象时，根据代理对象的运行模式运行原始方法与增强的内容，完成操作</li></ul></li></ol><h4 id="_3-2-aop核心概念" tabindex="-1"><a class="header-anchor" href="#_3-2-aop核心概念" aria-hidden="true">#</a> 3.2 AOP核心概念</h4><p>目标对象（Target）：被代理的对象，也叫原始对象，该对象中的方法没有任何功能增强。<br> 代理对象（Proxy）：代理后生成的对象，由Spring帮我们创建代理对象。</p><h4 id="_3-3-在测试类中验证代理对象" tabindex="-1"><a class="header-anchor" href="#_3-3-在测试类中验证代理对象" aria-hidden="true">#</a> 3.3 在测试类中验证代理对象</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BookDao</span> bookDao <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//打印对象的类名</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bookDao<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/blog/assets/image-20210730152631741-6c63a193.png" alt="image-20210730152631741" tabindex="0" loading="lazy"><figcaption>image-20210730152631741</figcaption></figure><h3 id="_4-aop切入点表达式" tabindex="-1"><a class="header-anchor" href="#_4-aop切入点表达式" aria-hidden="true">#</a> 4 AOP切入点表达式</h3><h4 id="问题导入-3" tabindex="-1"><a class="header-anchor" href="#问题导入-3" aria-hidden="true">#</a> 问题导入</h4><p>在切入点表达式中如何简化包名和参数类型书写？</p><h4 id="_4-1-语法格式" tabindex="-1"><a class="header-anchor" href="#_4-1-语法格式" aria-hidden="true">#</a> 4.1 语法格式</h4><ul><li><p>切入点：要进行增强的方法</p></li><li><p>切入点表达式：要进行增强的方法的描述方式</p><ul><li>描述方式一：执行com.beisheng.dao包下的BookDao接口中的无参数update方法</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">execution</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>beisheng<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span>BookDao</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>描述方式二：执行com.beisheng.dao.impl包下的BookDaoImpl类中的无参数update方法</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">execution</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>beisheng<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>BookDaoImpl</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>切入点表达式标准格式：动作关键字(访问修饰符 返回值 包名.类/接口名.方法名(参数) 异常名）</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>execution(public User com.beisheng.service.UserService.findById(int))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>动作关键字：描述切入点的行为动作，例如execution表示执行到指定切入点</li><li>访问修饰符：public，private等，可以省略</li><li>返回值：写返回值类型</li><li>包名：多级包使用点连接</li><li>类/接口名：</li><li>方法名：</li><li>参数：直接写参数的类型，多个类型用逗号隔开</li><li>异常名：方法定义中抛出指定异常，可以省略</li></ul></li></ul><h4 id="_4-2-通配符" tabindex="-1"><a class="header-anchor" href="#_4-2-通配符" aria-hidden="true">#</a> 4.2 通配符</h4><blockquote><p>目的：可以使用通配符描述切入点，快速描述。</p></blockquote><ul><li>：单个独立的任意符号，可以独立出现，也可以作为前缀或者后缀的匹配符出现</li></ul><blockquote><p>匹配com.beisheng包下的任意包中的UserService类或接口中所有find开头的带有一个参数的方法</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>execution（<span class="token keyword">public</span> <span class="token operator">*</span> com<span class="token punctuation">.</span>beisheng<span class="token punctuation">.</span>*<span class="token punctuation">.</span>UserService<span class="token punctuation">.</span>find<span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>.. ：多个连续的任意符号，可以独立出现，常用于简化包名与参数的书写</li></ul><blockquote><p>匹配com包下的任意包中的UserService类或接口中所有名称为findById的方法</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>execution（<span class="token keyword">public</span> <span class="token class-name">User</span> com<span class="token punctuation">.</span><span class="token punctuation">.</span>UserService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>+：专用于匹配子类类型</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token punctuation">.</span>*<span class="token class-name">Service</span><span class="token operator">+</span><span class="token punctuation">.</span>*<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-3-书写技巧" tabindex="-1"><a class="header-anchor" href="#_4-3-书写技巧" aria-hidden="true">#</a> 4.3 书写技巧</h4><ul><li>所有代码按照标准规范开发，否则以下技巧全部失效</li><li>描述切入点通**<mark>常描述接口</mark>**，而不描述实现类</li><li>访问控制修饰符针对接口开发均采用public描述（<strong><mark>可省略访问控制修饰符描述</mark></strong>）</li><li>返回值类型对于增删改类使用精准类型加速匹配，对于查询类使用*通配快速描述</li><li><strong><mark>包名</mark><strong>书写</strong><mark>尽量不使用..匹配</mark></strong>，效率过低，常用*做单个包描述匹配，或精准匹配</li><li><strong><mark>接口名/类名</mark><strong>书写名称与模块相关的</strong><mark>采用*匹配</mark></strong>，例如UserService书写成*Service，绑定业务层接口名</li><li><strong><mark>方法名</mark><strong>书写以</strong><mark>动词</mark><strong>进行</strong><mark>精准匹配</mark></strong>，名词采用<em>匹配，例如getById书写成getBy</em>,selectAll书写成selectAll</li><li>参数规则较为复杂，根据业务方法灵活调整</li><li>通常**<mark>不使用异常</mark><strong>作为</strong><mark>匹配</mark>**规则</li></ul><h3 id="_5-aop通知类型【重点】" tabindex="-1"><a class="header-anchor" href="#_5-aop通知类型【重点】" aria-hidden="true">#</a> 5 AOP通知类型【重点】</h3><h4 id="问题导入-4" tabindex="-1"><a class="header-anchor" href="#问题导入-4" aria-hidden="true">#</a> 问题导入</h4><p>请描述一下如何定义环绕通知方法？</p><h4 id="_5-1-aop通知分类" tabindex="-1"><a class="header-anchor" href="#_5-1-aop通知分类" aria-hidden="true">#</a> 5.1 AOP通知分类</h4><ul><li>AOP通知描述了抽取的共性功能，根据共性功能抽取的位置不同，最终运行代码时要将其加入到合理的位置</li><li>AOP通知共分为5种类型 <ul><li>前置通知：在切入点方法执行之前执行</li><li>后置通知：在切入点方法执行之后执行，无论切入点方法内部是否出现异常，后置通知都会执行。</li><li>**<mark>环绕通知(重点)：</mark>**手动调用切入点方法并对其进行增强的通知方式。</li><li>返回后通知(了解)：在切入点方法执行之后执行，如果切入点方法内部出现异常将不会执行。</li><li>抛出异常后通知(了解)：在切入点方法执行之后执行，只有当切入点方法内部出现异常之后才执行。</li></ul></li></ul><h4 id="_5-2-aop通知详解" tabindex="-1"><a class="header-anchor" href="#_5-2-aop通知详解" aria-hidden="true">#</a> 5.2 AOP通知详解</h4><h5 id="_5-2-1-前置通知" tabindex="-1"><a class="header-anchor" href="#_5-2-1-前置通知" aria-hidden="true">#</a> 5.2.1 前置通知</h5><ul><li>名称：@Before</li><li>类型：<strong><mark>方法注解</mark></strong></li><li>位置：通知方法定义上方</li><li>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法前运行</li><li>范例：</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before advice ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-2-2-后置通知" tabindex="-1"><a class="header-anchor" href="#_5-2-2-后置通知" aria-hidden="true">#</a> 5.2.2 后置通知</h5><ul><li>名称：@After</li><li>类型：<mark><strong>方法注解</strong></mark></li><li>位置：通知方法定义上方</li><li>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法后运行</li><li>范例：</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after advice ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-2-3-返回后通知" tabindex="-1"><a class="header-anchor" href="#_5-2-3-返回后通知" aria-hidden="true">#</a> 5.2.3 返回后通知</h5><ul><li>名称：@AfterReturning（了解）</li><li>类型：<strong><mark>方法注解</mark></strong></li><li>位置：通知方法定义上方</li><li>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法正常执行完毕后运行</li><li>范例：</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterReturning advice ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-2-4-抛出异常后通知" tabindex="-1"><a class="header-anchor" href="#_5-2-4-抛出异常后通知" aria-hidden="true">#</a> 5.2.4 抛出异常后通知</h5><ul><li>名称：@AfterThrowing（了解）</li><li>类型：<strong><mark>方法注解</mark></strong></li><li>位置：通知方法定义上方</li><li>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法运行抛出异常后执行</li><li>范例：</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterThrowing advice ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-2-5-环绕通知" tabindex="-1"><a class="header-anchor" href="#_5-2-5-环绕通知" aria-hidden="true">#</a> 5.2.5 环绕通知</h5><ul><li>名称：@Around（重点，常用）</li><li>类型：<strong><mark>方法注解</mark></strong></li><li>位置：通知方法定义上方</li><li>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法前后运行</li><li>范例：：</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;around before advice ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;around after advice ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark><strong>环绕通知注意事项</strong></mark></p><ol><li>环绕通知方法形参必须是ProceedingJoinPoint，表示正在执行的连接点，使用该对象的proceed()方法表示对原始对象方法进行调用，返回值为原始对象方法的返回值。</li><li>环绕通知方法的返回值建议写成Object类型，用于将原始对象方法的返回值进行返回，哪里使用代理对象就返回到哪里。</li></ol><h2 id="二、aop案例" tabindex="-1"><a class="header-anchor" href="#二、aop案例" aria-hidden="true">#</a> 二、AOP案例</h2><h3 id="_1-案例-测量业务层接口万次执行效率" tabindex="-1"><a class="header-anchor" href="#_1-案例-测量业务层接口万次执行效率" aria-hidden="true">#</a> 1 案例-测量业务层接口万次执行效率</h3><h4 id="问题导入-5" tabindex="-1"><a class="header-anchor" href="#问题导入-5" aria-hidden="true">#</a> 问题导入</h4><p>能不能描述一下环绕通知里面的实现步骤？</p><h4 id="_1-1-需求和分析" tabindex="-1"><a class="header-anchor" href="#_1-1-需求和分析" aria-hidden="true">#</a> 1.1 需求和分析</h4><p>需求：任意业务层接口执行均可显示其执行效率（执行时长）</p><p>分析：</p><p>​ ①：业务功能：业务层接口执行前后分别记录时间，求差值得到执行效率<br> ​ ②：通知类型选择前后均可以增强的类型——环绕通知</p><h4 id="_1-2-代码实现" tabindex="-1"><a class="header-anchor" href="#_1-2-代码实现" aria-hidden="true">#</a> 1.2 代码实现</h4><h5 id="【前置工作】环境准备" tabindex="-1"><a class="header-anchor" href="#【前置工作】环境准备" aria-hidden="true">#</a> 【前置工作】环境准备</h5><ol><li><p>Spring整合mybatis对spring_db数据库中的Account进行CRUD操作</p></li><li><p>Spring整合Junit测试CRUD是否OK。</p></li><li><p>在pom.xml中添加aspectjweaver切入点表达式依赖</p></li><li><p>... ...</p></li></ol><h5 id="【第一步】编写通知类" tabindex="-1"><a class="header-anchor" href="#【第一步】编写通知类" aria-hidden="true">#</a> 【第一步】编写通知类</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProjectAdvice</span> <span class="token punctuation">{</span>
    <span class="token comment">//匹配业务层的所有方法</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.beisheng.service.*Service.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">servicePt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//设置环绕通知，在原始操作的运行前后记录执行时间</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;ProjectAdvice.servicePt()&quot;</span><span class="token punctuation">)</span> <span class="token comment">//本类类名可以省略不写</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">runSpeed</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取执行的签名对象</span>
        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取接口/类全限定名</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> signature<span class="token punctuation">.</span><span class="token function">getDeclaringTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取方法名</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//记录开始时间</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//执行万次操作</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//记录结束时间</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//打印执行结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;万次执行：&quot;</span><span class="token operator">+</span> className<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;----&gt;&quot;</span> <span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第二步】在springconfig配置类上开启aop注解功能" tabindex="-1"><a class="header-anchor" href="#【第二步】在springconfig配置类上开启aop注解功能" aria-hidden="true">#</a> 【第二步】在SpringConfig配置类上开启AOP注解功能</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.beisheng&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:jdbc.properties&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">JdbcConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">MybatisConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span> <span class="token comment">//开启AOP注解功能</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第三步】运行测试类-查看结果" tabindex="-1"><a class="header-anchor" href="#【第三步】运行测试类-查看结果" aria-hidden="true">#</a> 【第三步】运行测试类，查看结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountServiceTestCase</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountService</span> accountService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Account</span> account <span class="token operator">=</span> accountService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> accountService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/blog/assets/image-20210730164219555-40dea680.png" alt="image-20210730164219555" tabindex="0" loading="lazy"><figcaption>image-20210730164219555</figcaption></figure><h3 id="_2-aop切入点数据获取" tabindex="-1"><a class="header-anchor" href="#_2-aop切入点数据获取" aria-hidden="true">#</a> 2 AOP切入点数据获取</h3><h4 id="问题导入-6" tabindex="-1"><a class="header-anchor" href="#问题导入-6" aria-hidden="true">#</a> 问题导入</h4><p>在环绕通知中可以获取到哪些数据？</p><h4 id="_2-1-获取参数" tabindex="-1"><a class="header-anchor" href="#_2-1-获取参数" aria-hidden="true">#</a> 2.1 获取参数</h4><blockquote><p>说明：在前置通知和环绕通知中都可以获取到连接点方法的参数们</p></blockquote><ul><li>JoinPoint对象描述了连接点方法的运行状态，可以获取到原始方法的调用参数</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> jp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取连接点方法的参数们</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ProccedJointPoint是JoinPoint的子类</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取连接点方法的参数们</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-获取返回值" tabindex="-1"><a class="header-anchor" href="#_2-2-获取返回值" aria-hidden="true">#</a> 2.2 获取返回值</h4><blockquote><p>说明：在返回后通知和环绕通知中都可以获取到连接点方法的返回值</p></blockquote><ul><li>抛出异常后通知可以获取切入点方法中出现的异常信息，使用形参可以接收对应的异常对象</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;pt()&quot;</span><span class="token punctuation">,</span>returning <span class="token operator">=</span> <span class="token string">&quot;ret&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token class-name">String</span> ret<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//变量名要和returning=&quot;ret&quot;的属性值一致</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterReturning advice ...&quot;</span><span class="token operator">+</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>环绕通知中可以手工书写对原始方法的调用，得到的结果即为原始方法的返回值</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token comment">// 手动调用连接点方法，返回值就是连接点方法的返回值</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-获取异常" tabindex="-1"><a class="header-anchor" href="#_2-3-获取异常" aria-hidden="true">#</a> 2.3 获取异常</h4><blockquote><p>说明：在抛出异常后通知和环绕通知中都可以获取到连接点方法中出现的异常</p></blockquote><ul><li>抛出异常后通知可以获取切入点方法中出现的异常信息，使用形参可以接收对应的异常对象</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;pt()&quot;</span><span class="token punctuation">,</span>throwing <span class="token operator">=</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//变量名要和throwing = &quot;t&quot;的属性值一致</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterThrowing advice ...&quot;</span><span class="token operator">+</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>抛出异常后通知可以获取切入点方法运行的异常信息，使用形参可以接收运行时抛出的异常对象</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;pt()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">//此处需要try...catch处理，catch中捕获到的异常就是连接点方法中抛出的异常</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        ret <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        t<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-案例-百度网盘密码数据兼容处理" tabindex="-1"><a class="header-anchor" href="#_3-案例-百度网盘密码数据兼容处理" aria-hidden="true">#</a> 3 案例-百度网盘密码数据兼容处理</h3><h4 id="问题导入-7" tabindex="-1"><a class="header-anchor" href="#问题导入-7" aria-hidden="true">#</a> 问题导入</h4><p>请说出我们该使用什么类型的通知来完成这个需求？</p><h4 id="_3-1-需求和分析" tabindex="-1"><a class="header-anchor" href="#_3-1-需求和分析" aria-hidden="true">#</a> 3.1 需求和分析</h4><p>需求：对百度网盘分享链接输入密码时尾部多输入的空格做兼容处理</p><figure><img src="/blog/assets/image-20210731193059709-7ed1577b.png" alt="image-20210731193059709" tabindex="0" loading="lazy"><figcaption>image-20210731193059709</figcaption></figure><p>分析：<br> ①：在业务方法执行之前对所有的输入参数进行格式处理——trim()<br> ②：使用处理后的参数调用原始方法——环绕通知中存在对原始方法的调用</p><h4 id="_3-2-代码实现" tabindex="-1"><a class="header-anchor" href="#_3-2-代码实现" aria-hidden="true">#</a> 3.2 代码实现</h4><h5 id="【前置工作】环境准备-1" tabindex="-1"><a class="header-anchor" href="#【前置工作】环境准备-1" aria-hidden="true">#</a> 【前置工作】环境准备</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//-------------service层代码-----------------------</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ResourcesService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">openURL</span><span class="token punctuation">(</span><span class="token class-name">String</span> url <span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourcesServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ResourcesService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ResourcesDao</span> resourcesDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">openURL</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> resourcesDao<span class="token punctuation">.</span><span class="token function">readResources</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//-------------dao层代码-----------------------</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ResourcesDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">readResources</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourcesDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ResourcesDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">readResources</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//模拟校验</span>
        <span class="token keyword">return</span> password<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第一步】编写通知类-1" tabindex="-1"><a class="header-anchor" href="#【第一步】编写通知类-1" aria-hidden="true">#</a> 【第一步】编写通知类</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataAdvice</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(boolean com.beisheng.service.*Service.*(*,*))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">servicePt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;DataAdvice.servicePt()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">trimStr</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//判断参数是不是字符串</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Object</span> ret <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第二步】在springconfig配置类上开启aop注解功能-1" tabindex="-1"><a class="header-anchor" href="#【第二步】在springconfig配置类上开启aop注解功能-1" aria-hidden="true">#</a> 【第二步】在SpringConfig配置类上开启AOP注解功能</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.beisheng&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第三步】运行测试类-查看结果-1" tabindex="-1"><a class="header-anchor" href="#【第三步】运行测试类-查看结果-1" aria-hidden="true">#</a> 【第三步】运行测试类，查看结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ResourcesService</span> resourcesService <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ResourcesService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> resourcesService<span class="token punctuation">.</span><span class="token function">openURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://pan.baidu.com/haha&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-aop开发总结" tabindex="-1"><a class="header-anchor" href="#_4-aop开发总结" aria-hidden="true">#</a> 4 AOP开发总结</h3><h4 id="_4-1-aop的核心概念" tabindex="-1"><a class="header-anchor" href="#_4-1-aop的核心概念" aria-hidden="true">#</a> 4.1 AOP的核心概念</h4><ul><li>概念：AOP(Aspect Oriented Programming)面向切面编程，一种编程范式</li><li>作用：在不惊动原始设计的基础上为方法进行功能增强</li><li>核心概念 <ul><li>代理（Proxy）：SpringAOP的核心本质是采用代理模式实现的</li><li>连接点（JoinPoint）： 在SpringAOP中，理解为任意方法的执行</li><li>切入点（Pointcut）：匹配连接点的式子，也是具有共性功能的方法描述</li><li>通知（Advice）：若干个方法的共性功能，在切入点处执行，最终体现为一个方法</li><li>切面（Aspect）：描述通知与切入点的对应关系</li><li>目标对象（Target）：被代理的原始对象成为目标对象</li></ul></li></ul><h4 id="_4-2-切入点表达式语法" tabindex="-1"><a class="header-anchor" href="#_4-2-切入点表达式语法" aria-hidden="true">#</a> 4.2 切入点表达式语法</h4><ul><li><p>切入点表达式标准格式：动作关键字(访问修饰符 返回值 包名.类/接口名.方法名（参数）异常名)</p><ul><li>execution(* com.beisheng.service.<em>Service.</em>(..))</li></ul></li><li><p>切入点表达式描述通配符：</p><ul><li>作用：用于快速描述，范围描述</li><li>*：匹配任意符号（常用）</li><li>.. ：匹配多个连续的任意符号（常用）</li><li>+：匹配子类类型</li></ul></li><li><p>切入点表达式书写技巧</p><p>1.按标准规范开发<br> 2.查询操作的返回值建议使用*匹配<br> 3.减少使用..的形式描述包<br> 4.对接口进行描述，使用*表示模块名，例如UserService的匹配描述为*Service<br> 5.方法名书写保留动词，例如get，使用*表示名词，例如getById匹配描述为getBy*<br> 6.参数根据实际情况灵活调整</p></li></ul><h4 id="_4-3-五种通知类型" tabindex="-1"><a class="header-anchor" href="#_4-3-五种通知类型" aria-hidden="true">#</a> 4.3 五种通知类型</h4><ul><li>前置通知</li><li>后置通知 <ul><li>环绕通知（重点）</li><li>环绕通知依赖形参ProceedingJoinPoint才能实现对原始方法的调用</li><li>环绕通知可以隔离原始方法的调用执行</li><li>环绕通知返回值设置为Object类型</li><li>环绕通知中可以对原始方法调用过程中出现的异常进行处理</li></ul></li><li>返回后通知</li><li>抛出异常后通知</li></ul><h2 id="三、spring事务管理" tabindex="-1"><a class="header-anchor" href="#三、spring事务管理" aria-hidden="true">#</a> 三、Spring事务管理</h2><h3 id="_1-spring事务简介【重点】" tabindex="-1"><a class="header-anchor" href="#_1-spring事务简介【重点】" aria-hidden="true">#</a> 1 Spring事务简介【重点】</h3><h4 id="问题导入-8" tabindex="-1"><a class="header-anchor" href="#问题导入-8" aria-hidden="true">#</a> 问题导入</h4><p>Spring提供的事务管理是数据层的事务还是业务层的事务?</p><h4 id="_1-1-spring事务作用" tabindex="-1"><a class="header-anchor" href="#_1-1-spring事务作用" aria-hidden="true">#</a> 1.1 Spring事务作用</h4><ul><li>事务作用：在数据层保障一系列的数据库操作同成功同失败</li><li>Spring事务作用：在数据层或**<mark>业务层</mark>**保障一系列的数据库操作同成功同失败</li></ul><figure><img src="/blog/assets/image-20210801190820853-d0c9a90e.png" alt="image-20210801190820853" tabindex="0" loading="lazy"><figcaption>image-20210801190820853</figcaption></figure><h4 id="_1-2-需求和分析" tabindex="-1"><a class="header-anchor" href="#_1-2-需求和分析" aria-hidden="true">#</a> 1.2 需求和分析</h4><ul><li>需求：实现任意两个账户间转账操作</li><li>需求微缩：A账户减钱，B账户加钱</li><li>分析：<br> ①：数据层提供基础操作，指定账户减钱（outMoney），指定账户加钱（inMoney）<br> ②：业务层提供转账操作（transfer），调用减钱与加钱的操作<br> ③：提供2个账号和操作金额执行转账操作<br> ④：基于Spring整合MyBatis环境搭建上述操作</li><li>结果分析：<br> ①：程序正常执行时，账户金额A减B加，没有问题<br> ②：程序出现异常后，转账失败，但是异常之前操作成功，异常之后操作失败，整体业务失败</li></ul><h4 id="_1-3-代码实现" tabindex="-1"><a class="header-anchor" href="#_1-3-代码实现" aria-hidden="true">#</a> 1.3 代码实现</h4><h5 id="【前置工作】环境准备-2" tabindex="-1"><a class="header-anchor" href="#【前置工作】环境准备-2" aria-hidden="true">#</a> 【前置工作】环境准备</h5><blockquote><p>Spring整合Mybatis相关代码(依赖、JdbcConfig、MybatisConfig、SpringConfig)省略。</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AccountDao</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update tbl_account set money = money + #{money} where name = #{name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">inMoney</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update tbl_account set money = money - #{money} where name = #{name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">outMoney</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 转账操作
     * <span class="token keyword">@param</span> <span class="token parameter">out</span> 传出方
     * <span class="token keyword">@param</span> <span class="token parameter">in</span> 转入方
     * <span class="token keyword">@param</span> <span class="token parameter">money</span> 金额
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span><span class="token class-name">String</span> in <span class="token punctuation">,</span><span class="token class-name">Double</span> money<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountDao</span> accountDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span><span class="token class-name">String</span> in <span class="token punctuation">,</span><span class="token class-name">Double</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        accountDao<span class="token punctuation">.</span><span class="token function">outMoney</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
        accountDao<span class="token punctuation">.</span><span class="token function">inMoney</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第一步】在业务层接口上添加spring事务管理" tabindex="-1"><a class="header-anchor" href="#【第一步】在业务层接口上添加spring事务管理" aria-hidden="true">#</a> 【第一步】在业务层接口上添加Spring事务管理</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token comment">//配置当前接口方法具有事务</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span><span class="token class-name">String</span> in <span class="token punctuation">,</span><span class="token class-name">Double</span> money<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意事项</p><ol><li>Spring注解式事务通常添加在业务层接口中而不会添加到业务层实现类中，降低耦合</li><li>注解式事务可以添加到业务方法上表示当前方法开启事务，也可以添加到接口上表示当前接口所有方法开启事务</li></ol><h5 id="【第二步】设置事务管理器-将事务管理器添加到ioc容器中" tabindex="-1"><a class="header-anchor" href="#【第二步】设置事务管理器-将事务管理器添加到ioc容器中" aria-hidden="true">#</a> 【第二步】设置事务管理器(将事务管理器添加到IOC容器中)</h5><blockquote><p>说明：可以在JdbcConfig中配置事务管理器</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//配置事务管理器，mybatis使用的是jdbc事务</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PlatformTransactionManager</span> <span class="token function">transactionManager</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">DataSourceTransactionManager</span> dtm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    transactionManager<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> transactionManager<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意事项</p><ol><li>事务管理器要根据实现技术进行选择</li><li>MyBatis框架使用的是JDBC事务</li></ol><h5 id="【第三步】开启注解式事务驱动" tabindex="-1"><a class="header-anchor" href="#【第三步】开启注解式事务驱动" aria-hidden="true">#</a> 【第三步】开启注解式事务驱动</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.beisheng&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:jdbc.properties&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">JdbcConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">MybatisConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//开启注解式事务驱动</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第四步】运行测试类-查看结果" tabindex="-1"><a class="header-anchor" href="#【第四步】运行测试类-查看结果" aria-hidden="true">#</a> 【第四步】运行测试类，查看结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountServiceTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountService</span> accountService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testTransfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        accountService<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jerry&quot;</span><span class="token punctuation">,</span><span class="token number">100D</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-spring事务角色【理解】" tabindex="-1"><a class="header-anchor" href="#_2-spring事务角色【理解】" aria-hidden="true">#</a> 2 Spring事务角色【理解】</h3><h4 id="问题导入-9" tabindex="-1"><a class="header-anchor" href="#问题导入-9" aria-hidden="true">#</a> 问题导入</h4><p>什么是事务管理员，什么是事务协调员？</p><h4 id="_2-1-spring事务角色" tabindex="-1"><a class="header-anchor" href="#_2-1-spring事务角色" aria-hidden="true">#</a> 2.1 Spring事务角色</h4><ul><li>事务管理员：发起事务方，在Spring中通常指代业务层开启事务的方法</li><li>事务协调员：加入事务方，在Spring中通常指代数据层方法，也可以是业务层方法</li></ul><figure><img src="/blog/assets/image-20210801192453227-d0d5a8eb.png" alt="image-20210801192453227" tabindex="0" loading="lazy"><figcaption>image-20210801192453227</figcaption></figure><h3 id="_3-spring事务相关配置" tabindex="-1"><a class="header-anchor" href="#_3-spring事务相关配置" aria-hidden="true">#</a> 3 Spring事务相关配置</h3><h4 id="问题导入-10" tabindex="-1"><a class="header-anchor" href="#问题导入-10" aria-hidden="true">#</a> 问题导入</h4><p>什么样的异常，Spring事务默认是不进行回滚的？</p><h4 id="_3-1-事务配置" tabindex="-1"><a class="header-anchor" href="#_3-1-事务配置" aria-hidden="true">#</a> 3.1 事务配置</h4><figure><img src="/blog/assets/image-20210802151553053-ea06f348.png" alt="image-20210802151553053" tabindex="0" loading="lazy"><figcaption>image-20210802151553053</figcaption></figure><blockquote><p>说明：对于RuntimeException类型异常或者Error错误，Spring事务能够进行回滚操作。但是对于编译器异常，Spring事务是不进行回滚的，所以需要使用rollbackFor来设置要回滚的异常。</p></blockquote><h4 id="_3-2-案例-转账业务追加日志" tabindex="-1"><a class="header-anchor" href="#_3-2-案例-转账业务追加日志" aria-hidden="true">#</a> 3.2 案例：转账业务追加日志</h4><h5 id="需求和分析" tabindex="-1"><a class="header-anchor" href="#需求和分析" aria-hidden="true">#</a> 需求和分析</h5><ul><li>需求：实现任意两个账户间转账操作，并对每次转账操作在数据库进行留痕</li><li>需求微缩：A账户减钱，B账户加钱，数据库记录日志</li><li>分析：<br> ①：基于转账操作案例添加日志模块，实现数据库中记录日志<br> ②：业务层转账操作（transfer），调用减钱、加钱与记录日志功能</li><li>实现效果预期：<br> 无论转账操作是否成功，均进行转账操作的日志留痕</li><li>存在的问题：<br> 日志的记录与转账操作隶属同一个事务，同成功同失败</li><li>实现效果预期改进：<br> 无论转账操作是否成功，日志必须保留</li><li>事务传播行为：事务协调员对事务管理员所携带事务的处理态度</li></ul><figure><img src="/blog/assets/image-20210802153216460-3453977b.png" alt="image-20210802153216460" tabindex="0" loading="lazy"><figcaption>image-20210802153216460</figcaption></figure><h5 id="【准备工作】环境整备" tabindex="-1"><a class="header-anchor" href="#【准备工作】环境整备" aria-hidden="true">#</a> 【准备工作】环境整备</h5><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">USE</span> spring_db<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tbl_log<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	info <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	createDate <span class="token keyword">DATE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LogService</span> <span class="token punctuation">{</span>
    <span class="token comment">//propagation设置事务属性：传播行为设置为当前操作需要新事务</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span> <span class="token class-name">String</span> in<span class="token punctuation">,</span> <span class="token class-name">Double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">LogService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">LogDao</span> logDao<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span><span class="token class-name">String</span> in<span class="token punctuation">,</span><span class="token class-name">Double</span> money <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logDao<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;转账操作由&quot;</span><span class="token operator">+</span>out<span class="token operator">+</span><span class="token string">&quot;到&quot;</span><span class="token operator">+</span>in<span class="token operator">+</span><span class="token string">&quot;,金额：&quot;</span><span class="token operator">+</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LogDao</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into tbl_log (info,createDate) values(#{info},now())&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">String</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第一步】在accountserviceimpl中调用logservice中添加日志的方法" tabindex="-1"><a class="header-anchor" href="#【第一步】在accountserviceimpl中调用logservice中添加日志的方法" aria-hidden="true">#</a> 【第一步】在AccountServiceImpl中调用logService中添加日志的方法</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountDao</span> accountDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">LogService</span> logService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span><span class="token class-name">String</span> in <span class="token punctuation">,</span><span class="token class-name">Double</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            accountDao<span class="token punctuation">.</span><span class="token function">outMoney</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
            accountDao<span class="token punctuation">.</span><span class="token function">inMoney</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            logService<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>in<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第二步】在logservice的log-方法上设置事务的传播行为" tabindex="-1"><a class="header-anchor" href="#【第二步】在logservice的log-方法上设置事务的传播行为" aria-hidden="true">#</a> 【第二步】在LogService的log()方法上设置事务的传播行为</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LogService</span> <span class="token punctuation">{</span>
    <span class="token comment">//propagation设置事务属性：传播行为设置为当前操作需要新事务</span>
    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span><span class="token constant">REQUIRES_NEW</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">String</span> out<span class="token punctuation">,</span> <span class="token class-name">String</span> in<span class="token punctuation">,</span> <span class="token class-name">Double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="【第三步】运行测试类-查看结果-2" tabindex="-1"><a class="header-anchor" href="#【第三步】运行测试类-查看结果-2" aria-hidden="true">#</a> 【第三步】运行测试类，查看结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountServiceTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountService</span> accountService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testTransfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        accountService<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jerry&quot;</span><span class="token punctuation">,</span><span class="token number">50D</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-事务传播行为" tabindex="-1"><a class="header-anchor" href="#_3-3-事务传播行为" aria-hidden="true">#</a> 3.3 事务传播行为</h4><figure><img src="/blog/assets/image-20210802153014296-2f7367e3.png" alt="image-20210802153014296" tabindex="0" loading="lazy"><figcaption>image-20210802153014296</figcaption></figure></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Beisheng8888/blog/edit/main/src/src/基础框架/Spring03.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: jih6666@126.com">北省</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/Spring02.html"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Spring02</div></a><a class="vp-link nav-link next" href="/blog/src/%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/SpringBoot.html"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">SpringBoot<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 Mr.Jh</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-1973086d.js" defer></script>
  </body>
</html>
